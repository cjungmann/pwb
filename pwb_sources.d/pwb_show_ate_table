# -*- mode:shell-script; sh-shell:bash -*-
pwb_show_ate_table()
{
    if [ "$#" -lt 1 ]; then
        printf "Supply an ate table name to 'pwb_show_ate_table'.\n" >&2
        exit 1
    fi

    local table_name="$1"
    local format

    print_line()
    {
        local -i index="$1"
        local dsource="$2"
        local -i char_limit="$3"

        ate get_row "$dsource" "$index"
        ate_exit_on_error

        local tline
        printf -v tline "$format" "${ATE_ARRAY[@]}"
        printf "%s" "${tline:0:$char_limit}"
    }

    # Begin execution:
    ate_make_format_string format "$table_name"

    local -i row_count
    ate get_row_count "$table_name" -v row_count
    ate_exit_on_error

    local thandle
    pwb declare thandle "$table_name" "$row_count" print_line
    pwb_exit_on_error

    pwb start thandle
    pwb_exit_on_error
}
